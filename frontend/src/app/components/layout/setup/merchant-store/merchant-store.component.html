<div class="main-container">
  <div class="header">
    <div class="name-box">
      <i class="fa fa-bars" aria-hidden="true"></i>
      <h4>Merchant Stores</h4>
    </div>
  </div>

  <div class="filter-section">
    <div class="search-box">
      <input type="text" class="form-control" placeholder="Type to Search by Name or Code" [(ngModel)]="filterValue"
        (keyup.enter)="onEnterKey($event)">
      <select [(ngModel)]="selectedChain" (change)="onFilterChange()">
        <option value="">All Regions</option>
        <option *ngFor="let chain of merchantChains" [value]="chain">{{ chain }}</option>
      </select>
      <select [(ngModel)]="selectedStatus" (change)="onFilterChange()">
        <option value="">All Status</option>
        <option value="ENABLED">Enabled</option>
        <option value="DISABLED">Disabled</option>
      </select>
      <select [(ngModel)]="selectedAddress" (change)="onFilterChange()">
        <option value="">All Addresses</option>
        <option *ngFor="let address of addresses" [value]="address">{{ address }}</option>
      </select>
      <button id="reset-button" (click)="onReset()" style="background-color: #1713e0; border: 1px solid #a9a9a9;">
        Reset
      </button>
    </div>
    <div class="create-button">
      <button class="btn btn-primary" (click)="onCreate()" style="background-color: #007bff; color: white; border: none;">
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
        Create Merchant Store
      </button>
    </div>
  </div>

  <div class="section">
    <!-- Loading indicator -->
    <div *ngIf="loading" class="text-center">
      <i class="fa fa-spinner fa-spin"></i> Loading...
    </div>
  </div>

  <div class="main-content">
    <div class="table-container">
      <table class="table table-striped">
        <caption class="sr-only">List of merchant stores with their details including name, region, store code, location ID, status, and actions</caption>
        <thead>
          <tr>
            <th>Name</th>
            <th>Code</th>
            <th>Region</th>
            <th>Location ID</th>
            <th>City</th>
            <th>Status</th>
            <th>POS Safety</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let store of filteredMerchantStores; let i = index">
            <td>{{ store.name }}</td>
            <td>{{ store.code }}</td>
            <td>{{ store.region }}</td>
            <td>{{ store.locationId }}</td>
            <td>{{ store.city }}</td>
            <td>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" [id]="'status' + i"
                  [checked]="getDisplayStatus(store) === 'ENABLED'" (change)="updateStatus($event, store, 'status')">
                <label class="custom-control-label" [for]="'status' + i"></label>
              </div>
            </td>
            <td>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" [id]="'posSafety' + i"
                  [checked]="getPosStatus(store) === 'ENABLED'" (change)="updateStatus($event, store, 'posSafety')">
                <label class="custom-control-label" [for]="'posSafety' + i"></label>
              </div>
            </td>
            <td id="actions">
                <a id="edit" (click)="onEdit(store.id!)">Edit</a>
                <a id="delete" (click)="onDelete(store.id!, store.name)">Delete</a>
                <a id="view-details" (click)="onView(store.id!)">View Details</a>
              </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>