<div class="main-container">

  <div class="header">
    <div class="name-box">
      <i class="fa fa-bars" aria-hidden="true"></i>
      <h4>Merchant Chains</h4>
    </div>
    <div class="search-box">
      <input type="text" class="form-control" placeholder="Type to Filter by Merchant Chain" [(ngModel)]="filterValue"
        (keyup)="onEnterKey($event)">
      <button id="reset-button" (click)="onReset()">Reset</button>
    </div>
  </div>

  <div class="section">
    <div class="dropdown-filters">
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bg-white text-dark" type="button" id="dropdownMenuButton"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{ selectedStatusLabel }}
        </button>

        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#" (click)="filterByStatus($event, 'all')">All Status</a>
          <a class="dropdown-item" href="#" (click)="filterByStatus($event, '1')">Active</a>
          <a class="dropdown-item" href="#" (click)="filterByStatus($event, '0')">Inactive</a>
        </div>

      </div>
    </div>
    <div class="create-button">
      <button class="btn btn-primary" (click)="navigateToCreateMerchantChain()">
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
        Create Merchant Chain
      </button>
    </div>
  </div>

  <div class="main-content">
    <div class="table-container">
      <table class="table table-striped">
        <caption class="sr-only">List of merchant chains with their details including name, status, code, and active
          dates</caption>
        <thead>
          <tr>
            <th>Name</th>
            <th>Status</th>
            <th>Pos Safety</th>
            <th>Active Since</th>
            <th>Active To</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let merchantChain of filteredMerchantChains; let i = index">
            <td>
              <div>
                {{ merchantChain.name }}
              </div>
              <div id="merchant-name">
                Merchant Group:
                <a [routerLink]="['/layout/merchant-group/view', merchantChain.merchantInstitution?.id]" >
                  {{ merchantChain.merchantInstitution?.name }}
                </a>
              </div>
            </td>

            <td>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" [id]="'locked-status' + i"
                  [checked]="merchantChain.locked === '1'" (change)="updateStatus($event, merchantChain)" />
                <label class="custom-control-label" [for]="'locked-status' + i"></label>
              </div>
            </td>

            <td>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" [id]="'safety-status' + i"
                  [checked]="merchantChain.posSafetyFlag === '1'"
                  (change)="updatePosSafetyStatus($event, merchantChain)" aria-label="Toggle POS Safety"/>
                <label class="custom-control-label" [for]="'safety-status' + i"></label>
              </div>
            </td>

            <td>{{ merchantChain.activateOn | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
            <td>{{ merchantChain.expiryOn | date: 'yyyy-MM-dd HH:mm:ss' }}</td>

            <td id="actions">
              <a id="edit" (click)="navigateToEditMerchantChain(merchantChain.id!)">Edit</a>
              <a id="delete" (click)="deleteMerchantChain(merchantChain.id!, merchantChain.name!)">Delete</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>